# TodoPro: Task Management Application

**TodoPro** is a modern, full-stack task management application designed to help users stay organized and productive. It features a seamless user interface powered by a Next.js frontend and a secure, scalable NestJS backend with Google OAuth2 authentication and PostgreSQL for data persistence. The application supports task creation, management, and tracking with advanced features like calendar views, priority levels, categories, and user profile management.

---

## ✨ Features

- **User Authentication**: Secure sign-in and sign-up using Google OAuth2 with JWT-based session management.
- **Dashboard**: A clean, filterable overview of all tasks, organized by status, priority, or category.
- **Task Management**: Full CRUD operations for todos, including titles, descriptions, due dates, priorities, and categories.
- **Calendar View**: Visualize tasks on an interactive calendar to plan and track deadlines.
- **Filtering & Sorting**: Advanced filtering by status, priority, or text search, with sorting by date or priority.
- **User Profile**: View and update profile details, including name, bio, and avatar.
- **Responsive Design**: A fluid, adaptive UI that works seamlessly across devices.
- **Toast Notifications**: User-friendly feedback for actions and errors using shadcn/ui toasts.
- **Secure Backend**: JWT access/refresh token rotation, secure cookie management, and avatar file handling.

---

## 🧱 Tech Stack

### Frontend
- **Next.js 14+**: React framework with App Router for performant web applications.
- **React**: JavaScript library for building user interfaces.
- **JavaScript**: Primary language for frontend logic.
- **Tailwind CSS**: Utility-first CSS framework for rapid UI development.
- **shadcn/ui**: Reusable UI components built with Radix UI and Tailwind CSS.
- **Lucide React**: Customizable open-source icons.
- **Axios**: Promise-based HTTP client for API requests.
- **Server Actions**: Next.js feature for server-side data mutations.

### Backend
- **NestJS**: TypeScript-based framework for scalable server-side applications.
- **Prisma**: ORM for database interactions with PostgreSQL.
- **PostgreSQL**: Relational database for robust data storage.
- **Google OAuth 2.0 + JWT**: Secure authentication and session management.
- **Multer**: File upload handling for user avatars.

---

## 📂 Project Structure

### Frontend
```
frontend/
├── src/
│   ├── app/                                 # Next.js App Router pages (route handlers)
│   │   ├── layout.jsx                       # Root layout for the entire application
│   │   ├── page.jsx                         # Root page (wrapper for modules/home/page.jsx - assuming a home page)
│   │   ├── globals.css                      # Global CSS styles
│   │   ├── login/
│   │   │   └── page.jsx                     # This will be a simple wrapper importing from modules/login/page.jsx
│   │   ├── calendar/
│   │   │   └── page.jsx                     # Wrapper for modules/calendar/page.jsx
│   │   ├── contact/
│   │   │   └── page.jsx                     # Wrapper for modules/contact/page.jsx
│   │   ├── dashboard/
│   │   │   └── page.jsx                     # Wrapper for modules/dashboard/page.jsx
│   │   ├── features/
│   │   │   └── page.jsx                     # Wrapper for modules/features/page.jsx
│   │   ├── help/
│   │   │   └── page.jsx                     # Wrapper for modules/help/page.jsx
│   │   ├── privacy/
│   │   │   └── page.jsx                     # Wrapper for modules/privacy/page.jsx
│   │   ├── profile/
│   │   │   ├── edit/
│   │   │   │   └── page.jsx                 # Wrapper for modules/profile/edit/page.jsx
│   │   │   └── page.jsx                     # Wrapper for modules/profile/page.jsx
│   │   └── terms/
│   │       └── page.jsx                     # Wrapper for modules/terms/page.jsx
│   │
│   ├── components/                          # Reusable UI components (e.g., Shadcn UI, shared UI elements)
│   │   ├── shared/                          # Components used across many parts of the app (Header, Footer)
│   │   │   ├── footer.jsx
│   │   │   └── header.jsx
│   │   ├── todo/                            # Components specific to the "todo" feature/domain
│   │   │   ├── todo-card.jsx
│   │   │   ├── todo-filters.jsx
│   │   │   └── todo-form.jsx
│   │   └── ui/                              # Shadcn UI components (generated by `shadcn-ui add`)
│   │       ├── accordion.tsx
│   │       ├── alert.tsx
│   │       ├── avatar.tsx
│   │       ├── badge.tsx
│   │       ├── button.tsx
│   │       ├── card.tsx
│   │       ├── checkbox.tsx
│   │       ├── dialog.tsx
│   │       ├── dropdown-menu.tsx
│   │       ├── input.tsx
│   │       ├── label.tsx
│   │       ├── select.tsx
│   │       ├── sonner.tsx
│   │       └── textarea.tsx
│   │
│   ├── lib/                                 # Pure, framework-agnostic utilities (no React, no API calls)
│   │   ├── constants.ts                     # Application-wide constants (e.g., categories, priorities)
│   │   └── utils.ts                         # General utility functions (e.g., `cn` for Tailwind)
│   │
│   ├── services/                            # Interfacing with external APIs & core business logic
│   │   ├── actions/                         # Next.js Server Actions (backend-like operations)
│   │   │   ├── todo.actions.ts              # Server actions related to todos (create, update, delete)
│   │   │   └── user.actions.ts              # Server actions related to users (update profile)
│   │   ├── api/
│   │   │   └── axiosInstance.ts             # Centralized Axios setup with interceptors for API calls
│   │   ├── auth/
│   │   │   └── auth.service.ts              # Client-side authentication logic (sign-in, current user, token management)
│   │   └── todos/
│   │       └── todos.service.ts             # Client-side data fetching and filtering logic for todos
│   │
│   └── modules/                             # Feature modules: encapsulated logic & views per route
│       ├── login/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── calendar/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── contact/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── dashboard/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── features/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── help/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── home/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── privacy/
│       │   ├── index.jsx
│       │   └── view.jsx
│       ├── profile/
│       │   ├── index.jsx
│       │   └── view.jsx
│       │   └── edit/
│       │       ├── index.jsx
│       │       └── view.jsx
│       └── terms/
│           ├── index.jsx
│           └── view.jsx
│
├── .env.local                               # Environment Variables file
├── components.json                          # Shadcn UI configuration file
├── eslint.config.mjs                        # ESLint configuration
├── next-env.d.ts                            # Next.js environment type definitions
├── next.config.ts                           # Next.js configuration
├── node_modules/                            # Node.js dependencies
├── package.json                             # Project metadata and dependencies
├── package-lock.json                        # Exact dependency tree
├── postcss.config.mjs                       # PostCSS configuration for Tailwind CSS
├── README.md                                # Project README file
├── tailwind.config.js                       # Tailwind CSS configuration
└── tsconfig.json                            # TypeScript configuration
```

### Backend
```
todo-app/backend
│
├── .vscode/                                        # VS Code-specific editor settings
│   └── settings.json                               # Enables format on save using Prettier
│
├── prisma/                                         # Prisma ORM configuration and migrations
│   ├── schema.prisma                               # Defines DB models, enums, and relations
│   └── migrations/                                 # Auto-generated DB migration files/folders
│       └── ...                                     # Individual migration directories (timestamped)
│
├── public/                                         # Publicly accessible static files
│   ├── index.html                                  # Basic API test UI (can be removed in prod)
│   └── token-test.html                             # UI for testing login, refresh, logout
│
├── uploads/                                        # Uploaded user files (e.g., avatars)
│   └── avatars/                                    # Stores profile pictures locally
│
├── test/                                           # End-to-end (e2e) testing setup (default NestJS)
│   ├── app.e2e-spec.ts                             # Basic e2e test for root AppController
│   └── jest-e2e.json                               # Jest config for running e2e tests
│
├── src/
│   ├── main.ts                                     # Entry point; sets up app, middleware, global configs
│   ├── app.module.ts                               # Root module that imports all feature modules
│   │
│   ├── config/                                     # App-wide configurations
│   │   ├── jwt.config.ts                           # JWT secret, expiry, signing options
│   │   ├── cookie.config.ts                        # Secure cookie options for refresh tokens
│   │   ├── multer.config.ts                        # Multer setup for file upload (avatars)
│   │   └── env.schema.ts                           # Joi validation for .env file
│   │
│   ├── common/                                     # Shared logic (non-feature-specific)
│   │   ├── guards/
│   │   │   ├── jwt.guard.ts                        # Global JWT guard
│   │   │   └── api-key.guard.ts                    # API key guard (2FA style)
│   │   ├── decorators/                             # Custom route decorators (Currently empty)
│   │   ├── interceptors/                           # Custom interceptors (e.g., logging, transforming, {currently empty})
│   │   └── pipes/                                  # Custom validation pipes (Currently empty)
│   │
│   ├── core/                                       # Globally used services
│   │   ├── prisma/
│   │   │   ├── prisma.module.ts                    # Exports Prisma Service globally
│   │   │   └── prisma.service.ts                   # Custom Prisma client service
│   │   └── token/                                  # Token module (access & refresh)
│   │       ├── token.module.ts
│   │       └── services/
│   │           └── token.service.ts                # Handles refresh token & access token issue
│   │
│   └── modules/                                    # All feature-specific logic
│       ├── auth/                                   # Authentication (Google OAuth + JWT)
│       │   ├── controllers/
│       │   │   └── auth.controller.ts              # Handles /auth endpoints
│       │   ├── services/
│       │   │   └── auth.service.ts                 # Core auth logic (Google sign-in, logout)
│       │   ├── guards/
│       │   │   └── refresh-token.guard.ts          # Protects refresh token endpoint
│       │   ├── strategies/
│       │   │   ├── google.strategy.ts              # Google OAuth strategy
│       │   │   └── jwt.strategy.ts                 # JWT strategy (extracts user from token)
│       │   ├── dto/
│       │   │   └── login-response.dto.ts           # DTO for login response structure
│       │   ├── types/
│       │   │   └── request-with-user.interface.ts  # Extends Request object with user info
│       │   └── auth.module.ts                      # Auth module declaration
│       │
│       ├── user/                                   # User-related features (profile, avatar)
│       │   ├── controllers/
│       │   │   └── user.controller.ts              # Handles /users endpoints
│       │   ├── services/
│       │   │   └── user.service.ts                 # Business logic for user profile updates
│       │   ├── dto/
│       │   │   └── update-user.dto.ts              # DTO for validating user profile updates
│       │   ├── types/
│       │   │   └── user-response.interface.ts      # Response structure for user info
│       │   └── user.module.ts                      # User module declaration
│       │
│       └── todo/                                   # Todo module (CRUD)
│           ├── constants/
│           │   └── filter-options.ts               # Centralized enums for todo filters
│           ├── controllers/
│           │   └── todo.controller.ts              # Handles /todos endpoints
│           ├── services/
│           │   └── todo.service.ts                 # Todo creation, update, delete, get logic
│           ├── dto/
│           │   ├── create-todo.dto.ts              # DTO for creating a new todo
│           │   ├── filter-todo.dto.ts              # DTO for validating todo filter query params
│           │   └── update-todo.dto.ts              # DTO for updating an existing todo
│           ├── types/
│           │   └── todo-response.interface.ts      # Response shape for todo objects
│           └── todo.module.ts                      # Todo module declaration
│
├── .env                                            # Environment variables (DB_URL, JWT_SECRET, API_KEY, etc.)
├── .env.example                                    # Environment variables example file
├── .gitignore                                      # Specifies files/folders to ignore in version control
├── .prettierrc                                     # Prettier config for consistent code formatting
├── nest-cli.json                                   # NestJS CLI configuration
├── package.json                                    # Project metadata, dependencies, and scripts
├── tsconfig.json                                   # TypeScript compiler base configuration
├── tsconfig.build.json                             # TypeScript config for production builds
└── README.md                                       # Complete project documentation
```

---

## ⚙️ Setup Instructions

### Prerequisites
- **Node.js**: v18.x or later ([nodejs.org](https://nodejs.org/en/download/)).
  - Verify with: `node -v` and `npm -v`.
- **npm or Yarn**: Package manager for dependency installation.
- **PostgreSQL**: Database for storing user and todo data.
- **Google OAuth Credentials**: Obtain `GOOGLE_CLIENT_ID` and `GOOGLE_CLIENT_SECRET` from [Google Cloud Console](https://console.cloud.google.com/).

### Frontend Setup
1. **Clone the Repository**:
   ```bash
   git clone https://github.com/hodev09/todo-app.git
   cd todo-app/frontend
   ```

2. **Install Dependencies**:
   ```bash
   npm install
   ```
   Or with Yarn:
   ```bash
   yarn install
   ```

3. **Configure Environment Variables**:
   Create a `.env.local` file in the `frontend/` directory:
   ```env
   NEXT_PUBLIC_API_BASE_URL="http://localhost:8000"
   NEXT_PUBLIC_AUTH_API_URL="http://localhost:8000"
   NEXT_PUBLIC_API_KEY="your_api_secret_key"
   ```

   * `NEXT_PUBLIC_API_BASE_URL`: Base URL of your main backend API endpoints
   * `NEXT_PUBLIC_AUTH_API_URL`: Base URL for authentication endpoints (can be same as above)
   * `NEXT_PUBLIC_API_KEY`: Secret key for protecting the endpoints
   ---

4. **Run the Application**:
   ```bash
   npm run dev
   ```
   Or with Yarn:
   ```bash
   yarn dev
   ```
   Open [http://localhost:3000](http://localhost:3000) in your browser.

### Backend Setup
1. **Navigate to Backend Directory**:
   ```bash
   cd todo-app/backend
   ```

2. **Create `.env` File**:
   ```env
   PORT=8000
   DATABASE_URL=postgresql://postgres:password@localhost:5432/todo_db
   GOOGLE_CLIENT_ID=your-google-client-id
   GOOGLE_CLIENT_SECRET=your-google-client-secret
   GOOGLE_CALLBACK_URL=http://localhost:8000/auth/google/callback
   ACCESS_TOKEN_SECRET=your-access-token-secret
   ACCESS_TOKEN_EXPIRY=15m
   REFRESH_TOKEN_SECRET=your-refresh-token-secret-key
   REFRESH_TOKEN_EXPIRY=1d
   NODE_ENV=development
   ```

3. **Install Dependencies**:
   ```bash
   npm install
   ```

4. **Run Database Migrations**:
   ```bash
   npx prisma migrate dev
   ```

5. **Start the Server**:
   ```bash
   npm run start:dev
   ```

---

## 🔐 APIs

### Authentication
| Method | Endpoint                | Description                     |
| ------ | ----------------------- | ------------------------------- |
| GET    | `/auth/google`          | Redirects to Google login       |
| GET    | `/auth/google/callback` | Handles OAuth2 callback         |
| POST   | `/auth/logout`          | Logs out user                   |

**Login Response**:
- Sets `access_token` (non-HttpOnly) and `refresh_token` (HttpOnly) cookies.

**Logout Response**:
```json
{ "message": "Logged out successfully" }
```

### User Profile
| Method | Endpoint   | Description                 |
| ------ | ---------- | --------------------------- |
| GET    | `/user/me` | Get logged-in user profile  |
| PATCH  | `/user/me` | Update name, bio, or avatar |

**Get Profile Response**:
```json
{
  "id": "uuid",
  "email": "user@example.com",
  "name": "User Name",
  "avatar": "uploads/avatars/avatar.jpg",
  "bio": "string | null",
  "createdAt": "2025-07-17T10:00:00.000Z"
}
```

### Todos
| Method | Endpoint    | Description         |
| ------ | ----------- | ------------------- |
| POST   | `/todo`     | Create a new todo   |
| GET    | `/todo`     | Get all user todos  |
| PATCH  | `/todo/:id` | Update a todo       |
| DELETE | `/todo/:id` | Delete a todo       |

**Create Todo Request**:
```json
{
  "title": "Buy groceries",
  "description": "Milk, Eggs, Bread",
  "priority": "high",
  "category": "personal",
  "dueDate": "2025-07-30T10:00:00.000Z"
}
```

**Create Todo Response**:
```json
{
  "id": "uuid",
  "title": "Buy groceries",
  "description": "Milk, Eggs, Bread",
  "priority": "high",
  "category": "personal",
  "dueDate": "2025-07-30T10:00:00.000Z",
  "completed": false,
  "createdAt": "2025-07-17T11:00:00.000Z",
  "updatedAt": "2025-07-17T11:00:00.000Z"
}
```

---

## 🛡️ Security Best Practices
- **Frontend**:
  - Client-side token management with automatic refresh on 401 errors.
  - Secure Axios interceptors for attaching tokens to requests.
  - Next.js Server Actions for secure data mutations.
- **Backend**:
  - JWT access/refresh token rotation with secure cookie attributes (`HttpOnly`, `SameSite`, `Secure`, `maxAge`).
  - Avatar file cleanup on update.
  - Joi-based environment variable validation.
  - Custom validators to prevent invalid data (e.g., past due dates).

---

## 🙋 Contributions
- Fork the repository and submit pull requests.
- Report issues or suggest improvements via GitHub Issues.
- Contact the team via email for collaboration.

---

## 📄 License
This project is licensed under the **MIT License** © 2025.

---# TodoPro
